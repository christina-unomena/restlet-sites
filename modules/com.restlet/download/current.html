<#global metaheader>
<#noparse>
<#if downloadurl?has_content>
<meta http-equiv="refresh" content="1; URL=${downloadurl}">
</#if>
</#noparse>
</#global>
<#global javascript_files=["/javascript/jquery-1.9.0.min.js", "/javascript/jquery-cookie.js", "/javascript/jsclass-core.js", "/javascript/json-minified.js", "/javascript/restlet-client.js", "/javascript/restlet-feedSummary.js", "/javascript/bootstrap.min.js", "/javascript/data.js", "/javascript/distributions.js"] />
<#global javascript>
<#noparse>
	$(document).ready(function() {
		// function to add trigerred events on show, hide jQuery function
		(function ($) {
	      $.each(['show', 'hide'], function (i, ev) {
	        var el = $.fn[ev];
	        $.fn[ev] = function () {
	          this.trigger(ev);
	          return el.apply(this, arguments);
	        };
	      });
	    })(jQuery);
	    
        init($("#cBranch"), $("#cEdition"), $("#cDistribution")<#if ("zip" ==  distribution) || ("exe" ==  distribution)>, true<#else>, false, true</#if>);
        //init($("#cBranch"), $("#cRelease"), $("#cEdition"), $("#cDistribution"), $("#archives"));
		
		//Snag the URL of the iframe so we can use it later
		var video_url = $('#ytplayer').attr('src');

		// custom handler on show event for #videoPopup
		$('#videoPopup').on('show', function(){
			$('#ytplayer').attr('src', video_url);
		});			
		
		// custom handler on hide event for #videoPopup
		$('#videoPopup').on('hide', function(){
			$('#ytplayer').attr('src', '');
		});
		
		// close the modal popup when clicking on the cross buntton
		$("#deployModal div.close-button").click(function() {
			$("#deployModal").hide();
        });
        
        // close the video popup and stop the video
		$("#videoPopup div.video-close-button").click(function() {
			$("#videoPopup").hide();
        });
        
        $("#newsLetterOkButton").click(
            function(event) {
                if (checkEmail("newsLetterEmail", "newsLetterOkButton")) {
	                var prodArray = [];
	
	                $("input:checked").each(function() {
	                    prodArray.push($(this).val());
	                });
	                
	                mixpanel.track("Shared email", {
	                    "email": $("#newsLetterEmail").val(),
	                    "Email field location":"RF Download page: newsletter sign up field",
	                    "Product":prodArray
	                }, function() {
	                    $("#newsLetterEmail").val("");
	                    $("#newsLetterEmail").attr("disabled", true);
	                    $("#newsLetterOkButton").html("&#10003;");
	                    $("#newsLetterOkButton").css("font-size","32px");
	                    $("#newsLetterOkButton").attr("disabled", true);
	                });
                }
            }
        );
	});
</#noparse>
</#global>

<#global stylesheet_files=["/stylesheets/modal.css"] />
<#global footer>
<#noparse>
<#if (showNewsletter?has_content)>
<script src="//platform.twitter.com/oct.js" type="text/javascript"></script>
<script type="text/javascript">
twttr.conversion.trackPid('l4d6j');
</script>
<noscript>
<img height="1" width="1" style="display:none;" alt="" src="https://analytics.twitter.com/i/adsct?txn_id=l4d6j&p_id=Twitter" />
</noscript>
</#if>
</#noparse>
</#global>
<#global content>
<!-- Start Download section -->
${downloadSection}
<!-- End Download section -->
<div id="newsletter">
	<div class="clearBoth"></div>
	<hr />
	<div class="elements">
		<div class="notifications">
			<h4>Keep me informed about</h4>
			<br />
			<div>
				<div class="span6">
					<div>
						<ul>
							<li><label for="restlet_framework"><input
									type="checkbox" value="Restlet Framework" name="group[9053][2]"
									id="restlet_framework" checked="checked"> <strong>Restlet
										Framework</strong> (new releases, security fixes, etc.)</label>
							</li>
							<li><label for="apispark"><input type="checkbox"
									value="APISpark" name="group[9053][1]" id="apispark"
									checked="checked"> <strong>APISpark</strong> (cloud
									platform based on Restlet framework)</label>
							</li>
						</ul>
					</div>
					<div>
						<div id="email-submit">
							<input type="email" name="EMAIL" id="newsLetterEmail"
								placeholder="Valid email address">
							<button id="newsLetterOkButton" name="subscribe">Notify me</button>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="quick-start">
            <h4>Quick Start Guide</h4>
			<ul>
				<li class="tutorial"><span><a href="/learn/tutorial">Tutorial</a></span></li>
				<li class="user-guide"><span><a href="/learn/guide">User<br/>Guide</a></span></li>
			</ul>
		</div>
    	<div class="clearBoth"></div>
	</div>
</div>
<#noparse>
<div id="maven_infos">
<#include "maven.ftl">
</div>
<div id="eclipse_infos">
<#include "eclipse.ftl">
</div>
</#noparse>
</#global>
