<#global metaheader>
<#noparse>
<#if downloadurl?has_content>
<meta http-equiv="refresh" content="1; URL=${downloadurl}">
</#if>
</#noparse>
</#global>
<#global javascript_files=["/javascript/jquery-1.9.0.min.js", "/javascript/jquery-cookie.js", "/javascript/jsclass-core.js", "/javascript/json-minified.js", "/javascript/restlet-client.js", "/javascript/restlet-feedSummary.js", "/javascript/bootstrap.min.js", "/javascript/data.js", "/javascript/distributions.js"] />
<#global javascript>
<#noparse>
	$(document).ready(function() {
        init($("#cBranch"), $("#cEdition"), $("#cDistribution")<#if ("zip" ==  distribution) || ("exe" ==  distribution)>, true<#else>, false, true</#if>);
        //init($("#cBranch"), $("#cRelease"), $("#cEdition"), $("#cDistribution"), $("#archives"));

		<!--  Begin popup Kin Lane -->
		$("#downloadDocKinLaneEmail").mouseleave(function() {
              var email = $("#downloadDocKinLaneEmail").val();
              var re = "[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?";
              var emailRegexp = new RegExp(re);
              
              if (email != "") {
                    if (emailRegexp.test(email)) {
                          $('#downloadDocKinLane').removeAttr("disabled");
                          $("#downloadDocKinLaneEmail").removeClass("error");
                    } else {
                          $("#downloadDocKinLaneEmail").addClass("error");
                          $('#downloadDocKinLane').attr("disabled", true);
                    }
              } else {
                    $("#downloadDocKinLaneEmail").removeClass("error");
                    $('#downloadDocKinLane').attr("disabled", true);
              }
        });
		$("#deployModal div.close-button").click(function() {
		          $("#deployModal").hide();
        });
        <!--  End popup Kin Lane -->

		$("#newsLetterEmail").mouseleave(function() {
              var email = $("#newsLetterEmail").val();
              var re = "[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?";
              var emailRegexp = new RegExp(re);
              
              if (email != "") {
                    if (emailRegexp.test(email)) {
                          $('#newsLetterOkButton').removeAttr("disabled");
                          $("#newsLetterEmail").removeClass("error");
                    } else {
                          $("#newsLetterEmail").addClass("error");
                          $('#newsLetterOkButton').attr("disabled", true);
                    }
              } else {
                    $("#newsLetterEmail").removeClass("error");
                    $('#newsLetterOkButton').attr("disabled", true);
              }
        });
        
        $("#newsLetterOkButton").click(
            function(event) {
                var products = "[";
                var prodArray = [];

                $("input:checked").each(function() {
                    products = products + "\"" + $(this).val() + "\","
                    prodArray.push($(this).val());
                });
                products = products.substring(0, products.length-1);
                products = products + "]";
                
                mixpanel.track("Shared email", {
                    "email": $("#newsLetterEmail").val(),
                    "Email field location":"RF Download page: newsletter sign up field",
                    "Product":prodArray
                }, function() {
                    $("#newsLetterEmail").val("");
                    $("#newsLetterEmail").attr("disabled", true);
                    $("#newsLetterOkButton").html("&#10003;");
                    $("#newsLetterOkButton").css("font-size","32px");
                    $("#newsLetterOkButton").attr("disabled", true);
                });
            }
        );
	});
</#noparse>
</#global>

<#global stylesheet_files=["/stylesheets/modal.css"] />
<#global footer>
<#noparse>
<#if (showNewsletter?has_content)>
<script src="//platform.twitter.com/oct.js" type="text/javascript"></script>
<script type="text/javascript">
twttr.conversion.trackPid('l4d6j');
</script>
<noscript>
<img height="1" width="1" style="display:none;" alt="" src="https://analytics.twitter.com/i/adsct?txn_id=l4d6j&p_id=Twitter" />
</noscript>
</#if>
</#noparse>
</#global>
<#global content>
<!-- Start Download section -->
${downloadSection}
<!-- End Download section -->
<div id="newsletter">
	<div class="clearBoth"></div>
	<hr />
	<div>
		<div class="notifications">
			<h4>Keep me informed about</h4>
			<br />
			<div>
				<div class="span6">
					<div>
						<ul>
							<li><label for="restlet_framework"><input
									type="checkbox" value="Restlet Framework" name="group[9053][2]"
									id="restlet_framework" checked="checked"> <strong>Restlet
										Framework</strong> (new releases, security fixes, etc.)</label>
							</li>
							<li><label for="apispark"><input type="checkbox"
									value="APISpark" name="group[9053][1]" id="apispark"
									checked="checked"> <strong>APISpark</strong> (cloud
									platform based on Restlet framework)</label>
							</li>
						</ul>
					</div>
					<div>
						<div id="email-submit">
							<input type="email" name="EMAIL" id="newsLetterEmail"
								placeholder="Valid email address">
							<button id="newsLetterOkButton" name="subscribe" disabled="true">Notify me</button>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="quick-start">
            <h4>Quick Start Guide</h4>
			<ul>
				<li class="tutorial"><span><a href="/learn/tutorial">Tutorial</a></span></li>
				<li class="user-guide"><span><a href="/learn/guide">User<br/>Guide</a></span></li>
			</ul>
		</div>
	</div>
</div>
<#noparse>
<div id="maven_infos">
<#include "maven.ftl">
</div>
<div id="eclipse_infos">
<#include "eclipse.ftl">
</div>
</#noparse>
</#global>
